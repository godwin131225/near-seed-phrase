<!DOCTYPE html>
<html>

<head>
  <title>
    NEAR Seed Phrase Generator
  </title>

  <style>
    .container {
      margin: 0;
      position: absolute;
      top: 50%;
      left: 50%;
      -ms-transform: translate(-50%, -80%);
      transform: translate(-50%, -80%);
    }

    table,
    td,
    tr {
      border: 1px solid black;
    }

    table {
      width: 40%;
      border-collapse: collapse;
    }

    td {
      padding: 5px;
    }

    .t {
      font-weight: bold;
      white-space: nowrap;
    }

    #sk {
      width: 100%;
      word-break: break-all;
    }

    #skv {
      cursor: pointer;
    }

    #skvi {
      width: 25px;
      height: 25px;
    }

    #footer-line {
      width: 30%;
    }

  </style>
</head>

<body>
  <div class="container" align="center">
    <h2>
      NEAR Seed Phrase Generator
    </h2>

    <a href="https://github.com/near/near-seed-phrase">https://github.com/near/near-seed-phrase</a>

    <br />
    <br />

    <i>
      You can directly edit the seed phrase below to view the corresponding secret key and public key.
    </i>
    <br />
    <i>
      Or you can generate a new seed phrase by clicking the button below.
    </i>

    <br />
    <br />

    <input id="gp" type="button" value="Generate New">

    <br />
    <br />

    <table>
      <tr>
        <td class="t"> Seed Phrase: </td>
        <td rowspan="2" id="skv">
          <img id="skvi" src="assets/eye.svg" alt="show secrets">
        </td>
        <td id="sp"> ... </td>
      </tr>
      <tr>
        <td class="t"> Secret Key: </td>
        <td id="sk"> ... </td>
      </tr>
      <tr>
        <td class="t"> Public Key: </td>
        <td id="pk" colspan="2"> ... </td>
      </tr>
    </table>

    <br />

    <div>
      <hr id="footer-line" />
      <a href="https://github.com/miraclx/near-seed-phrase/blob/gh-pages/index.html">View Source</a>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/gh/near/near-seed-phrase@d0f7671/dist/near-seed-phrase.min.js"></script>
  <script>
    let [gp, sp, sk, pk] = document.querySelectorAll("#gp,#sp,#sk,#pk");
    for (let el of [sk, sp, pk])
      el.onclick = () => (!el.innerText.startsWith('•')) ? (window.getSelection().selectAllChildren(el)) : void 0;
    (skv.onclick = () => {
      if (sk.innerText.startsWith('•')) ([sk.innerText, sp.innerText] = [sk.key, sp.phrase], sp.contentEditable = true);
      else (sk.innerText = sp.innerText = '•'.repeat(80), sp.contentEditable = false);
    })();
    let update = ({ seedPhrase, secretKey, publicKey }) => {
      [sk.key, sp.phrase] = [secretKey, seedPhrase];
      if (!sk.innerText.startsWith('•')) [sk.innerText, sp.innerText] = [secretKey, seedPhrase];
      pk.innerText = publicKey;
    };
    (gp.onclick = () => update(nearSeedPhrase.generateSeedPhrase()))();
    sp.oninput = () => update(nearSeedPhrase.parseSeedPhrase(sp.innerText));
  </script>

</body>

</html>
